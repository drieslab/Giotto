<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Projection of cluster labels — doClusterProjection • Giotto</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Projection of cluster labels — doClusterProjection"><meta property="og:description" content="Use a fast KNN classifier to predict labels from a smaller giotto object"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Giotto</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/drieslab/Giotto/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Projection of cluster labels</h1>
    <small class="dont-index">Source: <a href="https://github.com/drieslab/Giotto/blob/HEAD/R/clustering.R" class="external-link"><code>R/clustering.R</code></a></small>
    <div class="hidden name"><code>doClusterProjection.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Use a fast KNN classifier to predict labels from a smaller giotto object</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">doClusterProjection</span><span class="op">(</span></span>
<span>  <span class="va">target_gobject</span>,</span>
<span>  target_cluster_label_name <span class="op">=</span> <span class="st">"knn_labels"</span>,</span>
<span>  spat_unit <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  feat_type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">source_gobject</span>,</span>
<span>  source_cluster_labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  reduction <span class="op">=</span> <span class="st">"cells"</span>,</span>
<span>  reduction_method <span class="op">=</span> <span class="st">"pca"</span>,</span>
<span>  reduction_name <span class="op">=</span> <span class="st">"pca"</span>,</span>
<span>  dimensions_to_use <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,</span>
<span>  knn_k <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  prob <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  algorithm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"kd_tree"</span>, <span class="st">"cover_tree"</span>, <span class="st">"brute"</span><span class="op">)</span>,</span>
<span>  return_gobject <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>target_gobject</dt>
<dd><p>target giotto object</p></dd>


<dt>target_cluster_label_name</dt>
<dd><p>name for predicted clusters</p></dd>


<dt>spat_unit</dt>
<dd><p>spatial unit</p></dd>


<dt>feat_type</dt>
<dd><p>feature type</p></dd>


<dt>source_gobject</dt>
<dd><p>source giotto object with annotation data</p></dd>


<dt>source_cluster_labels</dt>
<dd><p>annotation/labels to use to train KNN classifier</p></dd>


<dt>reduction</dt>
<dd><p>reduction on cells or features (default = cells)</p></dd>


<dt>reduction_method</dt>
<dd><p>shared reduction method (default = pca space)</p></dd>


<dt>reduction_name</dt>
<dd><p>name of shared reduction space (default name = 'pca')</p></dd>


<dt>dimensions_to_use</dt>
<dd><p>dimensions to use in shared reduction space (default = 1:10)</p></dd>


<dt>knn_k</dt>
<dd><p>number of k-neighbors to train a KNN classifier</p></dd>


<dt>prob</dt>
<dd><p>output probabilities together with label predictions</p></dd>


<dt>algorithm</dt>
<dd><p>nearest neighbor search algorithm</p></dd>


<dt>return_gobject</dt>
<dd><p>return giotto object</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>giotto object (default) or data.table with cell metadata</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Function to train a KNN with <code><a href="https://rdrr.io/pkg/FNN/man/knn.html" class="external-link">knn</a></code>. The training data
is obtained from the source giotto object (source_gobject) using existing annotations
within the cell metadata. Cells without annotation/labels from the target giotto
object (target_gobject) will receive predicted labels (and optional probabilities
with prob = TRUE).</p>
<p>**IMPORTANT** This projection assumes that you're using the same dimension reduction
space (e.g. PCA) and number of dimensions (e.g. first 10 PCs) to train the KNN
classifier as you used to create the initial annotations/labels in the source
Giotto object.</p>
<p>Altogether this is a convenience function that allow you to work with very big
data as you can predict cell labels on a smaller &amp; subsetted Giotto object and then
project the cell labels to the remaining cells in the target Giotto object.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Ruben Dries, Jiaji George Chen, Joselyn C. Chávez-Fuentes, Guo-Cheng Yuan, Matthew O’Brien, Edward Ruiz, Wen Wang, Natalie Del Rossi.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

